# Data Model: Agentic Research Orchestrator

## Entities

### 1. ResearchSession
Represents the top-level metadata for a user's research request.
- `id`: string (UUID)
- `userId`: string
- `query`: string (Original user input)
- `mode`: "quick_scan" | "deep_probe"
- `status`: "idle" | "analyzing" | "searching" | "synthesizing" | "completed" | "failed"
- `createdAt`: ISO8601 Timestamp
- `updatedAt`: ISO8601 Timestamp

### 2. ResearchState (LangGraph)
The internal state object used by the orchestration graph.
- `messages`: BaseMessage[] (Conversation history)
- `summary`: string (Condensed history of previous steps)
- `plan`: string[] (List of steps generated by the Planner)
- `currentStep`: number
- `results`: SearchResult[] (Raw data collected from Tavily)
- `report`: string (Markdown formatted final synthesis)
- `citations`: SourceCitation[] (Mapping of claims to URLs)

### 3. SourceCitation
Metadata for web sources found during research.
- `id`: string (Hash of URL)
- `url`: string
- `title`: string
- `snippet`: string
- `accessDate`: ISO8601 Timestamp

## Relationships
- `ResearchSession` has one `ResearchState`.
- `ResearchState` has many `SourceCitation` objects (via `results` and final `report`).

## Validation Rules (Zod)
- `query`: Minimum 5 characters, maximum 500 characters.
- `mode`: Must be one of the two allowed values.
- `SourceCitation`: `url` must be a valid URL.
